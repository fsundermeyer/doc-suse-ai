[#mcpo-installing]
= Installing {mcpo}

{mcp} (Model Context Protocol) is an open source standard for connecting AI applications{mdash}such as {suseai}{mdash}to external systems.
These external systems can include data sources like databases or local files, or tools like calculators or search engines.

{mcpo} is the {mcp}-to-OpenAPI proxy server provided by {owui}.
It solves communication compatibility issues, enables cloud and UI integrations, and offers increased security and scalability.

[#mcpo-installing-app-details]
== Details about the {mcpo} application

Before deploying {mcpo}, it is important to know more about the supported configurations and documentation.
The following command provides the corresponding details:

[source,subs="+attributes"]
----
helm show values oci://dp.apps.rancher.io/charts/open-webui-mcpo
----

Alternatively, you can also refer to the {mcpo} {helm} chart page on the {sappco} site at link:https://apps.rancher.io/applications/open-webui-mcpo[].
It contains {mcpo} dependencies, available versions and the link to pull the {mcpo} container image.

[#mcpo-installing-procedure]
== {mcpo} installation procedure

include::../snippets/ai-library-requirement.adoc[]

. Create a `mcpo_custom_overrides.yaml` file to override the default values of the {helm} chart.
The following file defines multiple {mcp} servers in the `config.mcpServers` section.
These servers will be added to the {mcpo} configuration file `config.json`.
[source,yaml]
----
# mcpo_custom_overrides.yaml
global:
  imagePullSecrets:
  - application-collection
config:
  mcpServers:
    memory:
      command: npx
      args:
        - -y
        - "@modelcontextprotocol/server-memory"
    time:
      command: uvx
      args:
        - mcp-server-time 
        - --local-timezone=America/New_York
    fetch:
      command: uvx
      args: 
        - mcp-server-fetch
    weather:
      command: uvx
      args: 
        - --from
        - git+https://github.com/adhikasp/mcp-weather.git 
        - mcp-weather
      env:
        - ACCUWEATHER_API_KEY: your_api_key_here</screen>
----

. After saving the override file as `mcpo_custom_overrides.yaml`, apply its configuration with the following command.
[source,subs="+attributes"]
----
{prompt_user}helm upgrade --install \
  mcpo oci://dp.apps.rancher.io/charts/open-webui-mcpo \
  -n SUSE_AI_NAMESPACE \
  -f mcpo_custom_overrides.yaml
----

[TIP]
====
.Installing {mcp} servers
You can add new {mcp} servers by including them in the {mcpo} configuration file following the link:https://github.com/modelcontextprotocol/servers[Claude Desktop {mcp} format].
For detailed information on installing {mcp} servers with {mcpo}, refer to the link:https://github.com/open-webui/mcpo?tab=readme-ov-file#-quick-usage[{mcpo} Quick Usage guide].
====

[#mcpo-owui-integration]
== Integrating {mcpo} with {owui}

To integrate {mcpo} with {owui}, follow these steps:

.Requirements
* include::../snippets/openwebui-requirement-admin-privileges.adoc[]

. In the bottom left of the {owui} window, click your avatar icon to open the user menu and select btn:[Admin Panel].
. Click the btn:[Settings] tab and select btn:[Tools] from the left menu.
. Under btn:[Manage Tool Servers], click the `plus` icon to add a new connection.
. For each {mcp} server:
** Provide the server URL, name and description.
** Set the visibility to btn:[Public] to make it available to all users.
** Check if the connection is successful and confirm with btn:[Save].
+
[TIP]
====
The general URL format is: MCPO_URL/MCP_SERVER_NAME.
For example, if {mcpo} was deployed as `mcpo` in the namespace `suse-ai` with the default port configuration, the URL is:
[source,subs="+attributes"]
----
http://mcpo-open-webui-mcpo.suse-ai.svc.cluster.local:8000/MCP_SERVER_NAME
----
====

After you have configured at least one {mcp} server, you can enable them from the {owui} chat input field to make answers more specific.
For more information, see link:https://documentation.suse.com/suse-ai/1.0/html/openwebui-using/index.html#openwebui-input-field-specify-mcpo-tools[Selecting {mcpo} services from the chat input field].

[TIP]
====
.Enabling {mcp} tools by default
To enable selected {mcp} tools by default for a model, refer to link:https://documentation.suse.com/suse-ai/1.0/html/openwebui-configuring/index.html#owui-enabling-default-mcp-services[Enabling default {mcp} services].
====

[#mcpo-upgrading]
== Upgrading {mcpo}

The {mcpo} chart receives application updates and updates of the {helm} chart templates.
New versions may include changes that require manual steps.
These steps are listed in the corresponding `README` file.
All {mcpo} dependencies are updated automatically during an {mcpo} upgrade.

To upgrade {mcpo}, identify the new version number and run the following command below:

[source,subs="+attributes"]
----
{prompt_user}helm upgrade --install \
  mcpo oci://dp.apps.rancher.io/charts/open-webui-mcpo \
  -n SUSE_AI_NAMESPACE \
  --version VERSION_NUMBER \
  -f mcpo_custom_overrides.yaml
----

[TIP]
====
If you omit the `--version` option, {mcpo} gets upgraded to the latest available version.
====

[#mcpo-uninstalling]
== Uninstalling {mcpo}

To uninstall {mcpo}, run the following command:

[source,subs="+attributes"]
----
{prompt_user}helm uninstall mcpo -n SUSE_AI_NAMESPACE
----
